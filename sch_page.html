
<!doctype html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Meta -->
	<meta name="description" content="Responsive Bootstrap4 Dashboard Template">
	<meta name="author" content="ParkerThemes">
	<meta name="csrf-token" content="PvcmpK3ij1wkcmT24bFSKRutPc16JwY6NODNJMWc">
	<link rel="shortcut icon" href="https://elearning.bsi.ac.id/assets/img/icon1.jfif" />
	<!-- Title -->
	<title>My Best</title>


	<!-- *************
			************ Common Css Files *************
		************ -->
	<!-- Bootstrap css -->
	<link rel="stylesheet" href="https://elearning.bsi.ac.id/assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://elearning.bsi.ac.id/assets/dist/sweetalert2.min.css">
	<link rel="stylesheet" href="https://elearning.bsi.ac.id/assets/dist/sweetalert2.css">

	<!-- Icomoon Font Icons css -->
	<link rel="stylesheet" href="https://elearning.bsi.ac.id/assets/fonts/style.css">

	<!-- Main css -->
	<link rel="stylesheet" href="https://elearning.bsi.ac.id/assets/css/main.css">
	<!-- Data Tables -->
	<link rel="stylesheet" href="https://elearning.bsi.ac.id/assets/vendor/datatables/dataTables.bs4.css" />
	<link rel="stylesheet" href="https://elearning.bsi.ac.id/assets/vendor/datatables/dataTables.bs4-custom.css" />
	<link rel="stylesheet" href="https://elearning.bsi.ac.id/assets/vendor/datatables/buttons.bs.css" />



	<!-- *************
			************ Vendor Css Files *************
		************ -->
	<!-- DateRange css -->
	<link rel="stylesheet" href="https://elearning.bsi.ac.id/assets/vendor/daterange/daterange.css" />
	<style>
		.dijawab {
			background: #1980d4;
			color: #fff;
			padding: 5px 10px;
			border-radius: 3px;
		}

		.pagination>li>a,
		.pagination>li>span {
			width: 38px;
			text-align: center;
			margin: 3px;
		}

		.timer {
			border: solid thin #b9b2b2;
			padding: 5px 15px;
			font-size: 14pt;
			color: #fff;
			background: #291a71;
		}

		.soal {
			margin: 0 0 15px 0;
		}

		.box-footer {
			border-top: 1px solid #ebebeb !important;
		}

		.jawab {
			cursor: pointer;
			margin: 0 0 7px 0;
		}

		.pilihan p {
			margin: 0;
		}
	</style>
	<style>
		/* Styling untuk ikon chat */
		.chatx-icon {
			position: fixed;
			top: 50%;
			right: 0;
			transform: translateY(-50%);
			cursor: pointer;
			z-index: 1000;
		}

		/* Ukuran ikon chat */
		.chatx-icon img {
			width: 80px;
			transition: transform 0.3s ease-in-out;
			/* Efek animasi saat hover */
		}

		/* Efek animasi saat hover di ikon chat */
		.chatx-icon img:hover {
			transform: scale(1.1);
			/* Membesar saat hover */
		}

		/* Styling untuk chat badge (jumlah pesan) */
		.chatx-badge {
			position: absolute;
			top: -5px;
			right: -5px;
			background: red;
			color: white;
			font-size: 14px;
			font-weight: bold;
			width: 20px;
			height: 20px;
			text-align: center;
			line-height: 20px;
			border-radius: 50%;
			box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);
		}

		/* Styling untuk chat box */
		.chatx-box,
		.private-chat {
			position: fixed;
			bottom: 80px;
			right: 20px;
			width: 300px;
			background: white;
			border-radius: 10px;
			box-shadow: 0px 0px 10px gray;
			display: none;
			z-index: 1000;
		}

		.chatx-box {
			position: fixed;
			bottom: 80px;
			right: 20px;
			width: 300px;
			height: 400px;
			background: white;
			border-radius: 10px;
			box-shadow: 0px 0px 10px gray;
			display: none;
			z-index: 1000;
			overflow: hidden;
		}

		.chatx-header {
			background: #007bff;
			color: white;
			padding: 10px;
			display: flex;
			justify-content: space-between;
			border-radius: 10px 10px 0 0;
		}

		/* HANYA bagian ini yang boleh scroll */
		.chatx-body {
			height: calc(100% - 50px);
			/* sisa tinggi dari header */
			overflow-y: auto;
			padding: 10px;
			box-sizing: border-box;
		}


		/* Styling footer chat box */
		.chatx-footer {
			padding: 10px;
			display: flex;
			align-items: center;
		}

		/* Styling input pesan */
		.chatx-footer input {
			flex: 1;
			padding: 5px;
			border-radius: 5px;
			/* Membulatkan sudut input */
			border: 1px solid #ccc;
			margin-right: 10px;
			font-size: 14px;
		}

		/* Styling tombol kirim */
		.chatx-footer button {
			background: #007bff;
			color: white;
			border: none;
			padding: 5px 15px;
			cursor: pointer;
			border-radius: 5px;
			/* Membulatkan sudut tombol */
			transition: background 0.3s ease;
		}

		/* Efek hover pada tombol kirim */
		.chatx-footer button:hover {
			background: #0056b3;
		}

		/* Efek fokus pada input pesan */
		.chatx-footer input:focus {
			outline: none;
			border-color: #007bff;
		}

		/* Styling untuk nama user yang bisa diklik */
		.chatx-user-link {
			cursor: pointer;
			color: #007bff;
			text-decoration: none;
			display: inline-block;
			padding: 5px;
			border-radius: 8px;
			transition: all 0.2s ease-in-out;
		}

		.chatx-user-link:hover {
			background-color: #f0f8ff;
		}

		.chatx-user-link.selected {
			background-color: #007bff;
			color: white;
			font-weight: bold;
			box-shadow: 0 0 8px rgba(0, 123, 255, 0.6);
		}


		.chatx-search-input {
			width: 100%;
			padding: 6px 10px;
			margin-bottom: 10px;
			border: 1px solid #ccc;
			border-radius: 5px;
			font-size: 14px;
		}

		#chat-user-scroll {
			max-height: 300px;
			overflow-y: auto;
		}

		#private-chat-messages {
			height: 300px;
			overflow-y: auto;
			padding: 10px;
		}

		#private-message:disabled::placeholder {
			color: #888;
			font-style: italic;
		}

		.badge-unread {
			background-color: red;
			color: white;
			padding: 2px 6px;
			border-radius: 12px;
			font-size: 12px;
			margin-left: 5px;
			font-weight: bold;
		}
	</style>

</head>

<body>

	<!-- Loading starts -->
	
	<!-- Loading ends -->


	<!-- Page wrapper start -->
	<div class="page-wrapper pinned">

		<!-- Sidebar wrapper start -->
		<nav id="sidebar" class="sidebar-wrapper">

			<!-- Sidebar brand end  -->

			<!-- Sidebar content start -->
			<div class="sidebar-content">

    <!-- sidebar menu start -->
    <div class="sidebar-menu">
        <ul>
            <li class="header-menu">Menu</li>
            <li class="sidebar">
                <a href="https://elearning.bsi.ac.id/user/dashboard">
                    <i class="icon-home"></i>
                    <span class="menu-text">Dashboard</span>
                </a>


                <a href="https://elearning.bsi.ac.id/profil">
                    <i class="icon-account_circle"></i>
                    <span class="menu-text">Profil</span>
                </a>
                <a href="https://elearning.bsi.ac.id/halaman-ujian">
                    <i class="icon-sports-club"></i>
                    <span class="menu-text">Ujian</span>
                </a>
                <!-- <a href="#" id="triggerUjian">
                    <i class="icon-sports-club"></i>
                    <span class="menu-text">Ujian</span>
                </a> -->



            </li>

            <li class="sidebar-dropdown">
                <a href="#">
                    <i class="icon-calendar1"></i>
                    <span class="menu-text">MBKM</span>
                </a>
                <div class="sidebar-submenu">
                    <ul>
                        <li>
                            <a href="https://elearning.bsi.ac.id/modul-mbkm">Modul MBKM</a>
                        </li>

                        <!--li>
                            <a href="https://elearning.bsi.ac.id/rekap-mbkm">Rekap MBKM</a>
                        </li-->
                    </ul>
                </div>
            </li>

            <li class="sidebar-dropdown">
                <a href="#">
                    <i class="icon-calendar"></i>
                    <span class="menu-text">Jadwal </span>
                </a>
                <div class="sidebar-submenu">
                    <ul>

                        <li>
                            <a href="https://elearning.bsi.ac.id/sch">Jadwal Kuliah</a>
                        </li>
                        <li>
                            <a href="https://elearning.bsi.ac.id/kuliah-pengganti">Kuliah Pengganti</a>
                        </li>
                        <li>
                            <a href="/exercise">Kuis</a>
                        </li>



                    </ul>
                </div>
            </li>
            

            <li class="sidebar">
                <form method="POST" action="https://elearning.bsi.ac.id/logout">
                    <input type="hidden" name="_token" value="PvcmpK3ij1wkcmT24bFSKRutPc16JwY6NODNJMWc" autocomplete="off">                    <a class="block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out" href="https://elearning.bsi.ac.id/logout" onclick="event.preventDefault();
                                              this.closest('form').submit();"><i class="icon-log-out1"></i> <!-- Ikon logout ditambahkan di sini -->

                        <span class="menu-text">Log Out</span></a>
                </form>
            </li>

        </ul>
    </div>
    <!-- sidebar menu end -->

</div>			<!-- Sidebar content end -->
		</nav>
		<!-- Sidebar wrapper end -->

		<!-- Page content start  -->
		<div class="page-content">

			<!-- Header start -->
			<header class="header">
    <div class="toggle-btns">
        <a id="toggle-sidebar" href="#">
            <i class="icon-list"></i>
        </a>
        <a id="pin-sidebar" href="#">
            <i class="icon-list"></i>
        </a>
    </div>
    <div class="header-items">
       

        <!-- Header actions start -->
        <ul class="header-actions">
          
       
            <li class="dropdown">
                <a href="#" id="userSettings" class="user-settings" data-toggle="dropdown" aria-haspopup="true">
                    <span class="user-name">15240587</span>
                    <span class="avatar"><i class="icon-user"></i><span class="status busy"></span></span>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userSettings">
                    <div class="header-profile-actions">
                        <div class="header-user-profile">
                         
                        </div>
                        <a href="https://elearning.bsi.ac.id/profil"><i class="icon-user1"></i> My Profile</a>

                        <form method="POST" action="https://elearning.bsi.ac.id/logout">
                            <input type="hidden" name="_token" value="PvcmpK3ij1wkcmT24bFSKRutPc16JwY6NODNJMWc" autocomplete="off">                            <a class="block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out" href="https://elearning.bsi.ac.id/logout" onclick="event.preventDefault();
                                                      this.closest('form').submit();"><i class="icon-log-out1"></i> <!-- Ikon logout ditambahkan di sini -->
                                Log Out</a>
                        </form>
                    </div>
                </div>
            </li>
        </ul>						
        <!-- Header actions end -->
    </div>
</header>			<!-- Header end -->

			<!-- Page header start -->
			<div class="page-header">
				<ol class="breadcrumb">
					<li class="breadcrumb-item">Elearning Universitas Bina Sarana Informatika </li>
					
					
				</ol>

				<ul class="app-actions">
					<li>
						<a href="#" id="reportrange">
							<span class="range-text"></span>
							<i class="icon-chevron-down"></i>
						</a>
					</li>

				</ul>
			</div>
			<!-- Page header end -->

			<!-- Main container start -->
			<div class="main-container">
				

<div class="content-wrapper">

    <!-- Row start -->
    <div class="row gutters">

                                <div class="col-lg-4 col-md-4 col-sm-12">
                <div class="pricing-plan">
                    <div class="pricing-header  secondary ">
                        <h6 class=" pricing-title">PENDIDIKAN AGAMA</h6>

                        <div class="pricing-save">kamis - 08:20-10:00</div>
                    </div>
                    <div class="card-body">
                        <h5 class="styled"><i class="icon-user"></i> Kode Dosen : DSR</h5>
                        <h5 class="styled"><i class="icon-local_library"></i> Kode MTK : 102</h5>
                        <h5 class="styled"><i class="icon-confirmation_number"></i> SKS : 2</h5>
                        <h5 class="styled"><i class="icon-address"></i> No Ruang : EL1-B2</h5>

                        <h5 class="styled  text-muted"><i class="icon-people_outline"></i> Kel Praktek : </h5>
                        <h5 class="styled "><i class="icon-bookmarks"></i> Kode Gabung : KG.102.07.P</h5>
                    </div>
                    <div class="pricing-footer">
                        <div class="btn-group" role="group" aria-label="Basic example">
                                                                                            
                                <a href="https://elearning.bsi.ac.id/absen-mhs/eyJpdiI6IlBRbnFtL1BKZEtRdnhZOWdyV0lFK0E9PSIsInZhbHVlIjoiV3FKak1kbi9DV3hTamlvMXNHMkpCMXNUWmZaQjA3NGE2aVNncWxOK2pJVy8zL3RvVjV3a1B6R2FlNWdIVDhaRDZVemVaV0xoSFpDcVdsUFhUN1NpYmc9PSIsIm1hYyI6IjAwYWM1NGRhNTJkZjAyNTk2NzM0YTU4ZDc3ZTJmZmI4ZGJhNjRhYjE2ODhkZjU3NmZhOGMyZWFiZDk2NWEyMGQiLCJ0YWciOiIifQ==" class="btn btn-primary btn-lg">Masuk Kelas</a>

                                <a href="https://elearning.bsi.ac.id/form-diskusimhs/eyJpdiI6IklCRnRQVUNMMDhod3JHRk1WRW8vUWc9PSIsInZhbHVlIjoid1NmdDh4dmYyRkRpWHE1STFpM2hUUT09IiwibWFjIjoiOTQxZmNmZDQ4NmFlYTNiMTBhYjBhZGI0ZDVlYjRkZDg4ODU4MGI1OTM2Y2I2MDU0YTczMWI1YWE5MmI4ODM5OSIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Diskusi">
                                    <i class="icon-chat"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/learning/eyJpdiI6IklCRnRQVUNMMDhod3JHRk1WRW8vUWc9PSIsInZhbHVlIjoid1NmdDh4dmYyRkRpWHE1STFpM2hUUT09IiwibWFjIjoiOTQxZmNmZDQ4NmFlYTNiMTBhYjBhZGI0ZDVlYjRkZDg4ODU4MGI1OTM2Y2I2MDU0YTczMWI1YWE5MmI4ODM5OSIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Materi">
                                    <i class="icon-archive"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/assignment/eyJpdiI6IklCRnRQVUNMMDhod3JHRk1WRW8vUWc9PSIsInZhbHVlIjoid1NmdDh4dmYyRkRpWHE1STFpM2hUUT09IiwibWFjIjoiOTQxZmNmZDQ4NmFlYTNiMTBhYjBhZGI0ZDVlYjRkZDg4ODU4MGI1OTM2Y2I2MDU0YTczMWI1YWE5MmI4ODM5OSIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Tugas">
                                    <i class="icon-archive"></i>
                                </a>
                        </div>
                    </div>
                </div>
            </div>
                        <div class="col-lg-4 col-md-4 col-sm-12">
                <div class="pricing-plan">
                    <div class="pricing-header  secondary ">
                        <h6 class=" pricing-title">BAHASA INGGRIS II</h6>

                        <div class="pricing-save">rabu - 13:20-15:00</div>
                    </div>
                    <div class="card-body">
                        <h5 class="styled"><i class="icon-user"></i> Kode Dosen : CYG</h5>
                        <h5 class="styled"><i class="icon-local_library"></i> Kode MTK : 105</h5>
                        <h5 class="styled"><i class="icon-confirmation_number"></i> SKS : 2</h5>
                        <h5 class="styled"><i class="icon-address"></i> No Ruang : EN1-D2</h5>

                        <h5 class="styled  text-muted"><i class="icon-people_outline"></i> Kel Praktek : </h5>
                        <h5 class="styled  text-muted"><i class="icon-bookmarks"></i> Kode Gabung : </h5>
                    </div>
                    <div class="pricing-footer">
                        <div class="btn-group" role="group" aria-label="Basic example">
                                                                                            
                                <a href="https://elearning.bsi.ac.id/absen-mhs/eyJpdiI6IlEzUjQ1ZHVmOVdYT1VuMnBoNVZFL3c9PSIsInZhbHVlIjoibm1ZcW9hcktieDVSdGZyMFN6YWFoektoNEh0K1QyemtRZUk5RC9iUExpQlEwOFZ2YU9JdnZNeGx6WkQxdmR1Y1RBdVpQOFNDQXdiL0dZOURnMmpyVVE9PSIsIm1hYyI6ImU1NzZhMWM0NWJlMzYzYjM1MTIyMWUxNDMyN2I3MzBkYjg2YWYxNTMyYWQ1ZGE2NmI1ZGZlMzFiODQ5ODNhNDgiLCJ0YWciOiIifQ==" class="btn btn-primary btn-lg">Masuk Kelas</a>

                                <a href="https://elearning.bsi.ac.id/form-diskusimhs/eyJpdiI6IndvbVoxZ3RRYTFjaEFIQjVqVTc5U3c9PSIsInZhbHVlIjoiV1llMWtwajlUdFRXS1ZuUUNtOGRBQT09IiwibWFjIjoiOTI4NTY2ZWRlNDViMWJkOTBhZGQ2NTBkMDJjMzkyZGNjNTYxMzQwZDJmNDYyZjQwZjUzMjU5OTUwODNlNDJmNyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Diskusi">
                                    <i class="icon-chat"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/learning/eyJpdiI6IndvbVoxZ3RRYTFjaEFIQjVqVTc5U3c9PSIsInZhbHVlIjoiV1llMWtwajlUdFRXS1ZuUUNtOGRBQT09IiwibWFjIjoiOTI4NTY2ZWRlNDViMWJkOTBhZGQ2NTBkMDJjMzkyZGNjNTYxMzQwZDJmNDYyZjQwZjUzMjU5OTUwODNlNDJmNyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Materi">
                                    <i class="icon-archive"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/assignment/eyJpdiI6IndvbVoxZ3RRYTFjaEFIQjVqVTc5U3c9PSIsInZhbHVlIjoiV1llMWtwajlUdFRXS1ZuUUNtOGRBQT09IiwibWFjIjoiOTI4NTY2ZWRlNDViMWJkOTBhZGQ2NTBkMDJjMzkyZGNjNTYxMzQwZDJmNDYyZjQwZjUzMjU5OTUwODNlNDJmNyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Tugas">
                                    <i class="icon-archive"></i>
                                </a>
                        </div>
                    </div>
                </div>
            </div>
                        <div class="col-lg-4 col-md-4 col-sm-12">
                <div class="pricing-plan">
                    <div class="pricing-header  secondary ">
                        <h6 class=" pricing-title">KALKULUS</h6>

                        <div class="pricing-save">senin - 10:00-12:30</div>
                    </div>
                    <div class="card-body">
                        <h5 class="styled"><i class="icon-user"></i> Kode Dosen : DDB</h5>
                        <h5 class="styled"><i class="icon-local_library"></i> Kode MTK : 227</h5>
                        <h5 class="styled"><i class="icon-confirmation_number"></i> SKS : 3</h5>
                        <h5 class="styled"><i class="icon-address"></i> No Ruang : 201-D2</h5>

                        <h5 class="styled  text-muted"><i class="icon-people_outline"></i> Kel Praktek : </h5>
                        <h5 class="styled  text-muted"><i class="icon-bookmarks"></i> Kode Gabung : </h5>
                    </div>
                    <div class="pricing-footer">
                        <div class="btn-group" role="group" aria-label="Basic example">
                                                                                            
                                <a href="https://elearning.bsi.ac.id/absen-mhs/eyJpdiI6IkQ1RmFZenJLYS9MZFZyR2FxV01GUFE9PSIsInZhbHVlIjoiMXNla2szcWczYnRrSkMwTllNcUo1MUVCOCtDa1lCQStsTkNXNit2REdTbnh1UFNXN0tsVnV2cG5IQmVjVjdDbGV5UVBLMGVlVlVJcFlGV0RGVGwxVWc9PSIsIm1hYyI6IjM4NmY5YzYwY2NkYTA1ZTY1MjcyYWEyNWJiYWJhZDc4Zjk3Y2FhNWE5YjZiMzhkZTEwM2ZjNTdlOTg0MWE5YmIiLCJ0YWciOiIifQ==" class="btn btn-primary btn-lg">Masuk Kelas</a>

                                <a href="https://elearning.bsi.ac.id/form-diskusimhs/eyJpdiI6Im5aZ0g3MnFyVWJmalp5Z2lzSkxxaHc9PSIsInZhbHVlIjoiVmJ3bDByTUtiZDdyajRueUxZOFh2dz09IiwibWFjIjoiMmU4NDBlNThhZGM4NjMwMGIxYzVlZTFkNDk5MmFlYWVhOGEwOGJlZTgwZjA2NTAzZjMwYTgzMjA1NGY2M2I0ZSIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Diskusi">
                                    <i class="icon-chat"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/learning/eyJpdiI6Im5aZ0g3MnFyVWJmalp5Z2lzSkxxaHc9PSIsInZhbHVlIjoiVmJ3bDByTUtiZDdyajRueUxZOFh2dz09IiwibWFjIjoiMmU4NDBlNThhZGM4NjMwMGIxYzVlZTFkNDk5MmFlYWVhOGEwOGJlZTgwZjA2NTAzZjMwYTgzMjA1NGY2M2I0ZSIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Materi">
                                    <i class="icon-archive"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/assignment/eyJpdiI6Im5aZ0g3MnFyVWJmalp5Z2lzSkxxaHc9PSIsInZhbHVlIjoiVmJ3bDByTUtiZDdyajRueUxZOFh2dz09IiwibWFjIjoiMmU4NDBlNThhZGM4NjMwMGIxYzVlZTFkNDk5MmFlYWVhOGEwOGJlZTgwZjA2NTAzZjMwYTgzMjA1NGY2M2I0ZSIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Tugas">
                                    <i class="icon-archive"></i>
                                </a>
                        </div>
                    </div>
                </div>
            </div>
                        <div class="col-lg-4 col-md-4 col-sm-12">
                <div class="pricing-plan">
                    <div class="pricing-header  secondary ">
                        <h6 class=" pricing-title">STRUKTUR DATA</h6>

                        <div class="pricing-save">senin - 15:00-17:30</div>
                    </div>
                    <div class="card-body">
                        <h5 class="styled"><i class="icon-user"></i> Kode Dosen : LSH</h5>
                        <h5 class="styled"><i class="icon-local_library"></i> Kode MTK : 310</h5>
                        <h5 class="styled"><i class="icon-confirmation_number"></i> SKS : 3</h5>
                        <h5 class="styled"><i class="icon-address"></i> No Ruang : 201-D2</h5>

                        <h5 class="styled  text-muted"><i class="icon-people_outline"></i> Kel Praktek : </h5>
                        <h5 class="styled  text-muted"><i class="icon-bookmarks"></i> Kode Gabung : </h5>
                    </div>
                    <div class="pricing-footer">
                        <div class="btn-group" role="group" aria-label="Basic example">
                                                                                            
                                <a href="https://elearning.bsi.ac.id/absen-mhs/eyJpdiI6ImFMMytzdEo4bTJZVllORSt2OVNvMmc9PSIsInZhbHVlIjoiWjdYeVpsbWlJVmVGbnFSQmx2TTQrd3ZhcW9OUEtmbjZpWWpHWCtXRjVRL1VoQjVwYVMzWTBMTXhJZU82bkYyUnpldy96NkttODV0OUd3cGx6UEd4MXc9PSIsIm1hYyI6Ijk3Mzc5ZTY1NzBmZmZiMDE4NTExNTE2NzIwMzEyOWY0NDQ3N2FhMmM5MWE5ZWIwMjg4NzE5MTRlNWEwNDZhNTIiLCJ0YWciOiIifQ==" class="btn btn-primary btn-lg">Masuk Kelas</a>

                                <a href="https://elearning.bsi.ac.id/form-diskusimhs/eyJpdiI6Ik1BNEwrQ2RrMFY0WEFBbiswZFVtaXc9PSIsInZhbHVlIjoiTzZkcHRVNWl4OXViS0NrVy9vSDNtdz09IiwibWFjIjoiMzA1ZTg5ZGM0MGVjY2E0OTQyNmQzZWYxMzM2ZGNhNDdhYjFhZGQ1Y2VjMzdmMzcxMzdlZGIyODgwYzgyNTlkYyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Diskusi">
                                    <i class="icon-chat"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/learning/eyJpdiI6Ik1BNEwrQ2RrMFY0WEFBbiswZFVtaXc9PSIsInZhbHVlIjoiTzZkcHRVNWl4OXViS0NrVy9vSDNtdz09IiwibWFjIjoiMzA1ZTg5ZGM0MGVjY2E0OTQyNmQzZWYxMzM2ZGNhNDdhYjFhZGQ1Y2VjMzdmMzcxMzdlZGIyODgwYzgyNTlkYyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Materi">
                                    <i class="icon-archive"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/assignment/eyJpdiI6Ik1BNEwrQ2RrMFY0WEFBbiswZFVtaXc9PSIsInZhbHVlIjoiTzZkcHRVNWl4OXViS0NrVy9vSDNtdz09IiwibWFjIjoiMzA1ZTg5ZGM0MGVjY2E0OTQyNmQzZWYxMzM2ZGNhNDdhYjFhZGQ1Y2VjMzdmMzcxMzdlZGIyODgwYzgyNTlkYyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Tugas">
                                    <i class="icon-archive"></i>
                                </a>
                        </div>
                    </div>
                </div>
            </div>
                        <div class="col-lg-4 col-md-4 col-sm-12">
                <div class="pricing-plan">
                    <div class="pricing-header  secondary ">
                        <h6 class=" pricing-title">SISTEM OPERASI</h6>

                        <div class="pricing-save">kamis - 12:30-15:00</div>
                    </div>
                    <div class="card-body">
                        <h5 class="styled"><i class="icon-user"></i> Kode Dosen : SFA</h5>
                        <h5 class="styled"><i class="icon-local_library"></i> Kode MTK : 328</h5>
                        <h5 class="styled"><i class="icon-confirmation_number"></i> SKS : 3</h5>
                        <h5 class="styled"><i class="icon-address"></i> No Ruang : EN1-D2</h5>

                        <h5 class="styled  text-muted"><i class="icon-people_outline"></i> Kel Praktek : </h5>
                        <h5 class="styled "><i class="icon-bookmarks"></i> Kode Gabung : KG.328.01.A</h5>
                    </div>
                    <div class="pricing-footer">
                        <div class="btn-group" role="group" aria-label="Basic example">
                                                                                            
                                <a href="https://elearning.bsi.ac.id/absen-mhs/eyJpdiI6ImFnRS9WSmZ4cm41M1dXK3A0SEVReEE9PSIsInZhbHVlIjoiajZmcjByM3kzN2xjY3AyWkZLNFdPSDkxclNFNzlucXpYVE50S3F6dlJLYUFOaHZVNFVQLzlxYzJ1Sm5IMncxQjladm5tWnl2UWNoMWUzTGVzM0tMbVE9PSIsIm1hYyI6IjA2MjYyOGZkMzM4YjFlYTdmMDkyMGY4MjhiNTkwZWU3MGE3MTQwNDY0ZGU3YjFmNGQ5ZTMxMDUzMTY3M2QxYWEiLCJ0YWciOiIifQ==" class="btn btn-primary btn-lg">Masuk Kelas</a>

                                <a href="https://elearning.bsi.ac.id/form-diskusimhs/eyJpdiI6IndXcE9Qa3hQRTV0ZTFjb0NEM1R0VFE9PSIsInZhbHVlIjoiVjBMVnN0ZENHcWowSkFDVTFFNUJHZz09IiwibWFjIjoiMmJjZWM3N2VmMTU1ZjA0MDFkODUwMmQ4MWUwZjU5NDc4ODMwYTM5YzY5MDRmMDIwZWM1MmJmNDU3NGRiYTU1NCIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Diskusi">
                                    <i class="icon-chat"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/learning/eyJpdiI6IndXcE9Qa3hQRTV0ZTFjb0NEM1R0VFE9PSIsInZhbHVlIjoiVjBMVnN0ZENHcWowSkFDVTFFNUJHZz09IiwibWFjIjoiMmJjZWM3N2VmMTU1ZjA0MDFkODUwMmQ4MWUwZjU5NDc4ODMwYTM5YzY5MDRmMDIwZWM1MmJmNDU3NGRiYTU1NCIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Materi">
                                    <i class="icon-archive"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/assignment/eyJpdiI6IndXcE9Qa3hQRTV0ZTFjb0NEM1R0VFE9PSIsInZhbHVlIjoiVjBMVnN0ZENHcWowSkFDVTFFNUJHZz09IiwibWFjIjoiMmJjZWM3N2VmMTU1ZjA0MDFkODUwMmQ4MWUwZjU5NDc4ODMwYTM5YzY5MDRmMDIwZWM1MmJmNDU3NGRiYTU1NCIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Tugas">
                                    <i class="icon-archive"></i>
                                </a>
                        </div>
                    </div>
                </div>
            </div>
                        <div class="col-lg-4 col-md-4 col-sm-12">
                <div class="pricing-plan">
                    <div class="pricing-header ">
                        <h6 class=" pricing-title">ARSITEKTUR KOMPUTER</h6>

                        <div class="pricing-save">Jumat - 15:00-17:30</div>
                    </div>
                    <div class="card-body">
                        <h5 class="styled"><i class="icon-user"></i> Kode Dosen : IKN</h5>
                        <h5 class="styled"><i class="icon-local_library"></i> Kode MTK : 869</h5>
                        <h5 class="styled"><i class="icon-confirmation_number"></i> SKS : 3</h5>
                        <h5 class="styled"><i class="icon-address"></i> No Ruang : EN7-D2</h5>

                        <h5 class="styled  text-muted"><i class="icon-people_outline"></i> Kel Praktek : </h5>
                        <h5 class="styled "><i class="icon-bookmarks"></i> Kode Gabung : KG.869.01.C</h5>
                    </div>
                    <div class="pricing-footer">
                        <div class="btn-group" role="group" aria-label="Basic example">
                                                                                            
                                <a href="https://elearning.bsi.ac.id/absen-mhs/eyJpdiI6InV6QXU1TWNXOWlpeHJDTnBpVzdTc1E9PSIsInZhbHVlIjoib1RhbDJJVTBLc2tJMHdNMXZDWDJKS0I4by9OSEZhdE1lb000S2ZLOGVTN1EwQUl4MHI0NnBvTHp3MVdCUTFYckJrNkdwRGJSYXBkMEhxK0pDdjNhZ294dmhnQ3ZvZXd0eGFnQWRZa1lKM3M9IiwibWFjIjoiZmQ5M2MzNjhmZTNiYWU5ZTg0NTZhMTQ2OWQ2MTZhMGZiNWRmZWU1MzgwM2VkM2FiZTA4Y2ZhYmM2OTAyOGM0YyIsInRhZyI6IiJ9" class="btn btn-primary btn-lg">Masuk Kelas</a>

                                <a href="https://elearning.bsi.ac.id/form-diskusimhs/eyJpdiI6Im5SVVplczRoZHIwRGoxeU9odkJLUEE9PSIsInZhbHVlIjoiUmhPMWVzTFRJd2dBRkhjU05zS3ZMUT09IiwibWFjIjoiZDhmOTk4OWNhZDEzYzA4MTQyMzhlNzMwMzY0N2JiMDhiMDQ4ZjcwN2RmYjVhZjYzYWExMDllMzIzMDVlN2M0YyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Diskusi">
                                    <i class="icon-chat"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/learning/eyJpdiI6Im5SVVplczRoZHIwRGoxeU9odkJLUEE9PSIsInZhbHVlIjoiUmhPMWVzTFRJd2dBRkhjU05zS3ZMUT09IiwibWFjIjoiZDhmOTk4OWNhZDEzYzA4MTQyMzhlNzMwMzY0N2JiMDhiMDQ4ZjcwN2RmYjVhZjYzYWExMDllMzIzMDVlN2M0YyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Materi">
                                    <i class="icon-archive"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/assignment/eyJpdiI6Im5SVVplczRoZHIwRGoxeU9odkJLUEE9PSIsInZhbHVlIjoiUmhPMWVzTFRJd2dBRkhjU05zS3ZMUT09IiwibWFjIjoiZDhmOTk4OWNhZDEzYzA4MTQyMzhlNzMwMzY0N2JiMDhiMDQ4ZjcwN2RmYjVhZjYzYWExMDllMzIzMDVlN2M0YyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Tugas">
                                    <i class="icon-archive"></i>
                                </a>
                        </div>
                    </div>
                </div>
            </div>
                                                <div class="col-lg-4 col-md-4 col-sm-12">
                <div class="pricing-plan">
                    <div class="pricing-header  secondary ">

                        <h6 class=" pricing-title">PEMROGRAMAN BERBASIS OBJEK</h6>

                        <div class="pricing-save">selasa - 07:30-10:50</div>
                    </div>
                    <div class="card-body">
                        <h5 class="styled"><i class="icon-user"></i> Kode Dosen : IBA</h5>
                        <h5 class="styled"><i class="icon-local_library"></i> Kode MTK : 895</h5>
                        <h5 class="styled"><i class="icon-confirmation_number"></i> SKS : 4</h5>
                        <h5 class="styled"><i class="icon-address"></i> No Ruang : 102-D2</h5>

                        <h5 class="styled "><i class="icon-people_outline"></i> Kel Praktek : PBO.15.2B.01.A</h5>
                        <h5 class="styled  text-muted"><i class="icon-bookmarks"></i> Kode Gabung : </h5>
                    </div>
                    <div class="pricing-footer">
                        <div class="btn-group" role="group" aria-label="Basic example">
                                                                                            
                                <a href="https://elearning.bsi.ac.id/absen-mhs/eyJpdiI6Ill4VlVEUXRJK0trOEtTZy83ck1EQkE9PSIsInZhbHVlIjoicEtoUE9vdDhQbXFMMERnYVpMbW1jLzdpVGdMMFg0L1UrYjV3VFdrZFRJZUxDZk9aS1BJZ2JWQ0FRby8wM0lnU0pEeGMzV1BkZ0Qwdld6clpPc1FYZ20ydERTMzgzUnR5ZHVNSW5VbzBpekk9IiwibWFjIjoiOTNmNGIwNzZkZWM5ZmE2M2IxNjkzYmM5MGM1NzViMmM1YTc0YjNlN2Y1MjJhNWQ3NjBmNDg3MTY4ZmRmYWYxNSIsInRhZyI6IiJ9" class="btn btn-primary btn-lg">Masuk Kelas</a>

                                <a href="https://elearning.bsi.ac.id/form-diskusimhs/eyJpdiI6Inhsa3pxU0YzTHVLMlFTbVZweDdjSWc9PSIsInZhbHVlIjoiZzFvQW04dUFEOUhBRW5zOUJUcFB3dz09IiwibWFjIjoiNWEzN2Y2MDJhMzhmNzI2M2MxNzI5NTYzNmJlNTE2ZDEyYWEzZjMwZjJmZDZmMGYzNTQ2YmY0ODhmMmZjZjcwYyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Diskusi">
                                    <i class="icon-chat"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/learning/eyJpdiI6Inhsa3pxU0YzTHVLMlFTbVZweDdjSWc9PSIsInZhbHVlIjoiZzFvQW04dUFEOUhBRW5zOUJUcFB3dz09IiwibWFjIjoiNWEzN2Y2MDJhMzhmNzI2M2MxNzI5NTYzNmJlNTE2ZDEyYWEzZjMwZjJmZDZmMGYzNTQ2YmY0ODhmMmZjZjcwYyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Materi">
                                    <i class="icon-archive"></i>
                                </a>
                                <a href="https://elearning.bsi.ac.id/assignment/eyJpdiI6Inhsa3pxU0YzTHVLMlFTbVZweDdjSWc9PSIsInZhbHVlIjoiZzFvQW04dUFEOUhBRW5zOUJUcFB3dz09IiwibWFjIjoiNWEzN2Y2MDJhMzhmNzI2M2MxNzI5NTYzNmJlNTE2ZDEyYWEzZjMwZjJmZDZmMGYzNTQ2YmY0ODhmMmZjZjcwYyIsInRhZyI6IiJ9" type="button" class="btn btn-info" data-toggle="tooltip" data-placement="bottom" title="Ruang Tugas">
                                    <i class="icon-archive"></i>
                                </a>
                        </div>
                    </div>
                </div>
            </div>
                        
            



    </div>
            <!-- Row end -->

</div>
			</div>
			<!-- Main container end -->

		</div>
		<!-- Page content end -->

	</div>
	<!-- Page wrapper end -->
	<!-- Floating Chat Icon -->
	<div id="chat-icon" class="chatx-icon">
		<div class="chatx-user">
			<img src="https://elearning.bsi.ac.id/assets/img/MyBest-chat.png" alt="Chat">
			<span id="chat-user-count" class="chatx-badge">0</span>
		</div>
	</div>

	<!-- Chat Box -->
	<div id="chat-box" class="chatx-box">
		<div class="chatx-header">
			<h5>Users Online</h5>
			<button id="close-chat" class="close">&times;</button>
		</div>
		<div class="chatx-body" id="chat-user-scroll">
			<input type="text" id="search-user" placeholder="Cari user..." class="chatx-search-input">
			<ul id="chat-user-list"></ul>
		</div>
	</div>

	<!-- Private Chat Window -->
	<div id="private-chat" class="private-chat hidden">
		<div class="chatx-header">
			<h5 id="private-chat-title">Chat</h5>
			<button id="close-private-chat" class="close">&times;</button>
		</div>
		<div class="chatx-body" id="private-chat-messages"></div>
		<div class="chatx-footer">
			<input type="text" id="private-message" placeholder="Ketik pesan...">
			<button onclick="sendPrivateMessage()">Kirim</button>
		</div>
	</div>


	**************************-->
	<!-- Required jQuery first, then Bootstrap Bundle JS -->
	<script src="https://elearning.bsi.ac.id/js/jquery-ui.min.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/js/jquery.min.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/js/bootstrap.bundle.min.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/js/moment.js"></script>
	<script type="text/javascript" src="https://elearning.bsi.ac.id/assets/js/jquery.expander.js"></script>


	<!-- *************
			************ Vendor Js Files *************
		************* -->
	<!-- Slimscroll JS -->
	<script src="https://elearning.bsi.ac.id/assets/vendor/slimscroll/slimscroll.min.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/vendor/slimscroll/custom-scrollbar.js"></script>
	<!-- Daterange -->
	<script src="https://elearning.bsi.ac.id/assets/vendor/daterange/daterange.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/vendor/daterange/custom-daterange.js"></script>
	<!-- Custom Data tables -->
	<script src="https://elearning.bsi.ac.id/assets/vendor/datatables/custom/custom-datatables.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/vendor/datatables/custom/fixedHeader.js"></script>
	<!-- Data Tables -->
	<script src="https://elearning.bsi.ac.id/assets/vendor/datatables/dataTables.min.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/vendor/datatables/dataTables.bootstrap.min.js"></script>
	<!-- Download / CSV / Copy / Print -->
	<script src="https://elearning.bsi.ac.id/assets/vendor/datatables/buttons.min.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/vendor/datatables/jszip.min.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/vendor/datatables/pdfmake.min.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/vendor/datatables/vfs_fonts.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/vendor/datatables/html5.min.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/vendor/datatables/buttons.print.min.js"></script>
	<!-- Main JS -->
	<script src="https://elearning.bsi.ac.id/assets/js/main.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/dist/sweetalert2.min.js"></script>
	<script src="https://elearning.bsi.ac.id/assets/dist/script.js"></script>
	<!-- Lobipanel -->
	<script>
			</script>
	<script src="https://js.pusher.com/7.0/pusher.min.js"></script>
	<script>
		let selectedUserId = null;

		document.getElementById("chat-icon").addEventListener("click", function () {
			let chatBox = document.getElementById("chat-box");
			chatBox.style.display = (chatBox.style.display === "block") ? "none" : "block";

			if (chatBox.style.display === "block") {
				offset = 0;
				allLoaded = false;
				fetchOnlineUsers(true); // reset data saat buka chat box
			}
		});

		document.getElementById("close-chat").addEventListener("click", function() {
			document.getElementById("chat-box").style.display = "none"; // Tutup daftar user online
		});

		document.getElementById("close-private-chat").addEventListener("click", function() {
			document.getElementById("private-chat").style.display = "none"; // Tutup private chat
		});
		function toTitleCase(str) {
			return str.toLowerCase().split(' ').map(word => 
				word.charAt(0).toUpperCase() + word.slice(1)
			).join(' ');
		}
		// Ambil user online dari backend
		let offset = 0;
		const limit = 20;
		let isLoading = false;
		let allLoaded = false;
		let searchKeyword = "";
		let isSearching = false;
		let lastSendTime = 0;
		const sendCooldown = 10; // dalam detik
		let privateMessageOffset = 0;
		const privateMessageLimit = 20;
		let privateLoading = false;
		let allPrivateLoaded = false;



		function fetchOnlineUsers(reset = false) {
			if (isLoading || (!isSearching && allLoaded)) return;

			if (reset) {
				offset = 0;
				allLoaded = false;
				document.getElementById("chat-user-list").innerHTML = "";
			}

			isLoading = true;

			let url = isSearching
				? `/users-online?search=${encodeURIComponent(searchKeyword)}`
				: `/users-online?limit=${limit}&offset=${offset}`;

			fetch(url)
				.then(response => response.json())
				.then(response => {
					const users = response.users || response; // fallback untuk non-paginated response
					const total = response.total || users.length;

					// ✅ Update badge total user online
					document.getElementById("chat-user-count").innerText = total;

					if (!isSearching && users.length < limit) {
						allLoaded = true;
					}

					const userList = document.getElementById("chat-user-list");

					users.forEach(user => {
						let li = document.createElement("li");
						let name = toTitleCase(user.name);
						let kode = user.kode;
						let unread = user.unread_count || 0;
						li.innerHTML = `
							<span class="chatx-user-link" data-user-id="${user.id}" data-user-name="${name}">
								${name} (${kode}) 
								${unread > 0 ? `<span class="badge-unread">${unread}</span>` : ''}
							</span>
						`;
						userList.appendChild(li);
					});

					// Bind klik ke setiap user
					document.querySelectorAll(".chatx-user-link").forEach(link => {
						link.addEventListener("click", function () {
							let userId = this.getAttribute("data-user-id");
							let userName = this.getAttribute("data-user-name");
							document.querySelectorAll(".chatx-user-link").forEach(item => {
								item.classList.remove("selected");
							});
							this.classList.add("selected");
							openPrivateChat(userId, userName);
						});
					});

					if (!isSearching) {
						offset += limit;
					}

					isLoading = false;
				})
				.catch(error => {
					console.error("Error fetching users:", error);
					isLoading = false;
				});
		}


		// Membuka private chat dengan user tertentu
		function openPrivateChat(userId, userName) {
			selectedUserId = userId;
			privateMessageOffset = 0;
			allPrivateLoaded = false;

			let chatBox = document.getElementById("private-chat");
			let chatTitle = document.getElementById("private-chat-title");
			let chatMessages = document.getElementById("private-chat-messages");

			// ✅ Benar-benar hapus isi chat sebelumnya
			if (chatMessages) {
				chatMessages.innerHTML = '';
			}

			// Tampilkan nama user tujuan
			if (chatTitle) {
				chatTitle.innerText = `Chat dengan ${userName}`;
			}

			// Tampilkan chat box
			chatBox.style.display = "block";

			// Ambil pesan untuk user baru
			fetchOldMessages(userId, true);
		}


		function fetchOldMessages(userId, isReset = true) {
			if (privateLoading || allPrivateLoaded) return;
			privateLoading = true;

			if (isReset) {
				privateMessageOffset = 0;
				allPrivateLoaded = false;
			}

			const currentUserLock = selectedUserId;

			fetch(`/get-messages/${userId}?offset=${privateMessageOffset}&limit=${privateMessageLimit}`)
				.then(response => response.json())
				.then(messages => {
					// ✅ Cek: apakah masih chat dengan user yang sama?	
					if (currentUserLock !== selectedUserId) {
						console.warn("User berubah saat pesan datang, abaikan.");
						privateLoading = false;
						return;
					}

					if (messages.length < privateMessageLimit) {
						allPrivateLoaded = true;
					}

					const chatBox = document.getElementById("private-chat-messages");

					messages.forEach(message => {
						let sender = (message.sender_id == "72333") ? "Anda" : message.sender_name;
						const p = document.createElement("p");
						p.innerHTML = `<strong>${sender}:</strong> ${escapeHtml(message.message)}<br><small>${message.created_at}</small><hr>`;
						chatBox.appendChild(p); // atau prepend jika kamu pakai scroll atas
					});

					privateMessageOffset += privateMessageLimit;
					privateLoading = false;

					// Scroll ke bawah setelah pesan masuk (opsional)
					if (isReset) {
						chatBox.scrollTop = chatBox.scrollHeight;
					}
				})
				.catch(error => {
					console.error("Error fetching messages:", error);
					privateLoading = false;
				});
		}


		// Kirim pesan privat
		function sendPrivateMessage() {
			let input = document.getElementById("private-message");
			let message = escapeHtml(input.value.trim());
			const kirimButton = document.querySelector('#private-chat .chatx-footer button');

			if (!selectedUserId) {
				alert("Pilih user terlebih dahulu!");
				return;
			}

			if (message === "") {
				alert("Pesan tidak boleh kosong!");
				return;
			}

			// Cegah spam: disable input & tombol
			const cooldown = 10; // detik
			let remaining = cooldown;

			input.disabled = true;
			kirimButton.disabled = true;
			input.value = "";
			input.placeholder = `Tunggu ${remaining} detik...`;

			const countdownInterval = setInterval(() => {
				remaining--;
				if (remaining > 0) {
					input.placeholder = `Tunggu ${remaining} detik...`;
				} else {
					clearInterval(countdownInterval);
					input.disabled = false;
					kirimButton.disabled = false;
					input.placeholder = "Ketik pesan...";
				}
			}, 1000);

			// Kirim pesan ke server
			fetch('/send-private-message', {
				method: "POST",
				headers: {
					"Content-Type": "application/json",
					"X-CSRF-TOKEN": document.querySelector('meta[name="csrf-token"]').content
				},
				body: JSON.stringify({
					receiver_id: selectedUserId,
					message
				})
			})
			.then(response => response.json())
			.then(data => {
				if (data.error) {
					alert(data.error); // Tampilkan pesan error
				} else {
					let chatBox = document.getElementById("private-chat-messages");
					chatBox.innerHTML += `<p><strong>Anda:</strong> ${message}</p>`;
					chatBox.scrollTop = chatBox.scrollHeight;
				}
			})
			.catch(error => {
				console.error("Error sending message:", error);
			});
		}


		document.getElementById("search-user").addEventListener("keyup", function () {
			searchKeyword = this.value.trim().toLowerCase();
			isSearching = searchKeyword !== ""; // True kalau ada keyword pencarian

			offset = 0;
			allLoaded = false;
			fetchOnlineUsers(true);
		});

		document.getElementById("chat-user-scroll").addEventListener("scroll", function () {
			const scrollTop = this.scrollTop;
			const scrollHeight = this.scrollHeight;
			const offsetHeight = this.offsetHeight;

			if (scrollTop + offsetHeight >= scrollHeight - 10) {
				fetchOnlineUsers();
			}
		});
		function escapeHtml(text) {
			const div = document.createElement("div");
			div.innerText = text;
			return div.innerHTML;
		}

		// Realtime dengan Pusher untuk menerima pesan
		Echo.channel('private-chat')
			.listen('PrivateMessageSent', (e) => {
				console.log("Pesan diterima:", e.message);

				if (e.message.receiver_id == selectedUserId) {
					let chatBox = document.getElementById("private-chat-messages");

					// Membuat elemen baru untuk pesan
					const p = document.createElement("p");
					const sender = document.createElement("strong");
					sender.textContent = `${e.message.sender.name}:`;

					const messageText = document.createElement("span");
					messageText.textContent = e.message.message;

					p.appendChild(sender);
					p.appendChild(messageText);
					chatBox.appendChild(p);
				}
			});

	</script>


	</body>

</html>